schema: '2.0'
stages:
  prepare_emails:
    cmd: bash src/prepare_emails.sh
    deps:
    - path: code/convert_to_parquet.py
      hash: md5
      md5: a8fa47031ad7d03d77378c57abbf0a72
      size: 4652
    outs:
    - path: data/enron_emails.parquet
      hash: md5
      md5: e32b0855968545645da7d1fd57d32ba7
      size: 598003929
  report:
    cmd: bash -c "cd report && latexmk article.tex -pdf"
    deps:
    - path: report/article.tex
      hash: md5
      md5: ddea5843be57f91a64352fa37ce9e402
      size: 2553
    outs:
    - path: report/article.pdf
      hash: md5
      md5: a85c6b0dbc2336e2269b4757289566b1
      size: 74983
  scrape_convictions:
    cmd: python code/scrape_conviction_data.py --output data/convictions.csv
    deps:
    - path: code/scrape_conviction_data.py
      hash: md5
      md5: de00ddfdb649a1ddb83b665e648d6a8e
      size: 3922
    outs:
    - path: data/convictions.csv
      hash: md5
      md5: db9b823991c86d5c98c2a6ab30e8fd78
      size: 5517
  parse_messages:
    cmd: python code/parse_messages.py --emails_file data/enron_emails.parquet --person_yaml
      data/person_info.yaml --output data/processed_emails.csv
    deps:
    - path: code/parse_messages.py
      hash: md5
      md5: de35f9032a3704cb3a3fcd4f5a1cd91b
      size: 9363
    - path: data/enron_emails.parquet
      hash: md5
      md5: e32b0855968545645da7d1fd57d32ba7
      size: 598003929
    - path: data/person_info.yaml
      hash: md5
      md5: edb3847eda1bc5aad5a96915aad393e7
      size: 2193
    outs:
    - path: data/processed_emails.csv
      hash: md5
      md5: 9ee6af0a052c3759155a3eacb9884c55
      size: 72027320
  mask_datasets:
    cmd: python code/mask_datasets.py --email_file data/processed_emails.csv --output
      data/masked_emails.csv
    deps:
    - path: code/mask_datasets.py
      hash: md5
      md5: 975113911d4d0510ba3a33e55e9d37ec
      size: 3882
    - path: data/processed_emails.csv
      hash: md5
      md5: 9ee6af0a052c3759155a3eacb9884c55
      size: 72027320
    outs:
    - path: data/masked_emails.csv
      hash: md5
      md5: b1e32fa0c2c8a1020f3631f163739c24
      size: 146206503
